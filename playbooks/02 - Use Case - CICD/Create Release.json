{
    "@type": "Workflow",
    "triggerLimit": null,
    "name": "Create Release",
    "aliasName": null,
    "tag": null,
    "description": "Creates a release from the base branch",
    "isActive": true,
    "debug": false,
    "singleRecordExecution": false,
    "remoteExecutableFlag": false,
    "parameters": [
        "release_number",
        "release_description",
        "connector_config_id"
    ],
    "synchronous": false,
    "collection": "\/api\/3\/workflow_collections\/d80a4515-4d8f-4f7d-b5d3-3ed3571fc705",
    "versions": [],
    "triggerStep": "\/api\/3\/workflow_steps\/48c3020d-e1a4-4960-91ae-1a0591836ead",
    "steps": [
        {
            "@type": "WorkflowStep",
            "name": "Add comment for existing release",
            "description": null,
            "arguments": {
                "resource": {
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "people": [],
                    "content": "<p>The release <a href=\"{{vars.steps.Fetch_Release.data['html_url']}}\" target=\"_blank\" rel=\"noopener\">{{vars.steps.Fetch_Release.data.name}}<\/a> already exist for the <a href=\"{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}\" target=\"_blank\" rel=\"noopener\">{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}<\/a> Repository.<\/p>",
                    "__replace": "",
                    "isImportant": false,
                    "peopleUpdated": false,
                    "changeManagement": "{{[vars.input.records[0]['@id'],vars.steps.Find_Apply_Latest_Content_Record[0]['@id']] | unique}}"
                },
                "operation": "Overwrite",
                "collection": "\/api\/3\/comments",
                "__recommend": [],
                "fieldOperation": {
                    "recordTags": "Overwrite"
                },
                "step_variables": []
            },
            "status": null,
            "top": "980",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/2597053c-e718-44b4-8394-4d40fe26d357",
            "group": null,
            "uuid": "87e28c72-85e0-48f8-ae2b-d11d659cf9d6"
        },
        {
            "@type": "WorkflowStep",
            "name": "Add comment for new release",
            "description": null,
            "arguments": {
                "resource": {
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "people": [],
                    "content": "<p>A new release &nbsp;<a href=\"{{vars.steps.Create_Release.data['html_url']}}\" target=\"_blank\" rel=\"noopener\">{{vars.steps.Create_Release.data.name}}<\/a> is successfully created for the <a href=\"{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}\" target=\"_blank\" rel=\"noopener\">{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}<\/a> Repository.<\/p>",
                    "__replace": "",
                    "isImportant": false,
                    "peopleUpdated": false,
                    "changeManagement": "{{[vars.input.records[0]['@id'],vars.steps.Find_Apply_Latest_Content_Record[0]['@id']] | unique}}"
                },
                "operation": "Overwrite",
                "collection": "\/api\/3\/comments",
                "__recommend": [],
                "fieldOperation": {
                    "recordTags": "Overwrite"
                },
                "step_variables": []
            },
            "status": null,
            "top": "980",
            "left": "480",
            "stepType": "\/api\/3\/workflow_step_types\/2597053c-e718-44b4-8394-4d40fe26d357",
            "group": null,
            "uuid": "153d8ce3-45f9-4a9d-9bb1-b7f092551aa4"
        },
        {
            "@type": "WorkflowStep",
            "name": "Configuration",
            "description": null,
            "arguments": {
                "cicd_env": "{{globalVars.cicd_env}}",
                "cicd_config": "{{(globalVars.cicd_config | toDict)}}",
                "release_name": "Release\/",
                "release_number": "1.0",
                "source_control_web_url": "{{(globalVars.cicd_config | toDict)[\"source_control_web_url\"]}}",
                "prod_environment_record_iri": "\/api\/3\/change_management\/4be084b9-c5fe-4d42-943f-6bb2161d7157",
                "release_initial_description": "Intial Commit",
                "development_environment_record_uuid": "\/api\/3\/change_management\/acae4646-2b5b-4e4c-9f7f-9a4d47d93d47"
            },
            "status": null,
            "top": "160",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "88629062-0a07-4f0c-8b2e-204b651b6af4"
        },
        {
            "@type": "WorkflowStep",
            "name": "Create Release",
            "description": null,
            "arguments": {
                "arguments": {
                    "connector_config_id": "{{vars.input.params['connector_config_id']}}",
                    "create_release_params": "{\n\"org_name\": \"{{vars.cicd_config.content.split('\/')[-2]}}\",\n\"repo_name\": \"{{vars.cicd_config.content.split('\/')[-1]}}\",\n\"base_branch\": \"{{vars.cicd_config.baseBranch}}\",\n\"release_description\": \"{{vars.input.params['release_description']| ternary(vars.input.params['release_description'], vars.release_initial_description)}}\",\n\"tag_name\": \"{{vars.release_name}}{{vars.input.params['release_number']| ternary(vars.input.params['release_number'], vars.release_number)}}\"\n}"
                },
                "apply_async": false,
                "step_variables": {
                    "release": "{{vars.steps.Create_Release}}"
                },
                "pass_parent_env": false,
                "pass_input_record": true,
                "workflowReference": "{{vars.cicd_env[\"source_control_playbooks\"][\"CreateRelease\"][\"@id\"]}}"
            },
            "status": null,
            "top": "840",
            "left": "480",
            "stepType": "\/api\/3\/workflow_step_types\/74932bdc-b8b6-4d24-88c4-1a4dfbc524f3",
            "group": null,
            "uuid": "93e3d5a7-bfbb-4b08-bd2e-4890c7cf1f7b"
        },
        {
            "@type": "WorkflowStep",
            "name": "Fetch Release",
            "description": null,
            "arguments": {
                "arguments": {
                    "connector_config_id": "{{vars.input.params['connector_config_id']}}",
                    "fetch_release_params": "{\n\"org_name\": \"{{vars.cicd_config.content.split('\/')[-2]}}\",\n\"repo_name\": \"{{vars.cicd_config.content.split('\/')[-1]}}\",\n\"release_name\": \"{{vars.release_name}}{{vars.release_number}}\"\n}"
                },
                "apply_async": false,
                "ignore_errors": false,
                "step_variables": [],
                "pass_parent_env": false,
                "pass_input_record": true,
                "workflowReference": "{{vars.cicd_env[\"source_control_playbooks\"][\"FetchRelease\"][\"@id\"]}}"
            },
            "status": null,
            "top": "560",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/74932bdc-b8b6-4d24-88c4-1a4dfbc524f3",
            "group": null,
            "uuid": "294510bd-8ca1-4e25-b857-a164b81d279d"
        },
        {
            "@type": "WorkflowStep",
            "name": "Find Apply Latest Content Record",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "primitive",
                            "field": "title",
                            "value": "Apply Latest Content",
                            "operator": "eq",
                            "_operator": "eq"
                        },
                        {
                            "type": "object",
                            "field": "type",
                            "value": "\/api\/3\/picklists\/409b289f-33f5-423f-9174-24bc8628cc4a",
                            "_value": {
                                "@id": "\/api\/3\/picklists\/409b289f-33f5-423f-9174-24bc8628cc4a",
                                "display": "Production",
                                "itemValue": "Production"
                            },
                            "operator": "eq"
                        }
                    ],
                    "__selectFields": [
                        "id"
                    ]
                },
                "module": "change_management?$limit=30",
                "checkboxFields": true,
                "step_variables": []
            },
            "status": null,
            "top": "300",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "5a8d3a4e-d850-4c2b-bbc8-d11be59b6bc3"
        },
        {
            "@type": "WorkflowStep",
            "name": "Find Previous Result",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "primitive",
                            "field": "id",
                            "value": "{{vars.input.records[0].id}}",
                            "operator": "eq",
                            "_operator": "eq"
                        }
                    ],
                    "__selectFields": [
                        "results"
                    ]
                },
                "module": "change_management?$limit=30",
                "checkboxFields": true,
                "step_variables": []
            },
            "status": null,
            "top": "440",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "9d6e356e-d929-444d-ae85-e6f463f2a18b"
        },
        {
            "@type": "WorkflowStep",
            "name": "Is Release Exist",
            "description": null,
            "arguments": {
                "conditions": [
                    {
                        "option": "Yes",
                        "step_iri": "\/api\/3\/workflow_steps\/87e28c72-85e0-48f8-ae2b-d11d659cf9d6",
                        "condition": "{{ vars.steps.Fetch_Release.data | length > 0 }}",
                        "step_name": "Copy of Add comment for new release"
                    },
                    {
                        "option": "No",
                        "default": true,
                        "step_iri": "\/api\/3\/workflow_steps\/93e3d5a7-bfbb-4b08-bd2e-4890c7cf1f7b",
                        "step_name": "Create Release"
                    }
                ]
            },
            "status": null,
            "top": "700",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/12254cf5-5db7-4b1a-8cb1-3af081924b28",
            "group": null,
            "uuid": "a30e6ec7-8628-450d-a612-992c6ca026e9"
        },
        {
            "@type": "WorkflowStep",
            "name": "Start",
            "description": null,
            "arguments": {
                "step_variables": {
                    "input": {
                        "params": []
                    }
                }
            },
            "status": null,
            "top": "30",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/b348f017-9a94-471f-87f8-ce88b6a7ad62",
            "group": null,
            "uuid": "48c3020d-e1a4-4960-91ae-1a0591836ead"
        },
        {
            "@type": "WorkflowStep",
            "name": "Update Record",
            "description": null,
            "arguments": {
                "resource": {
                    "results": "<p>{% if vars.input.records[0].title != \"Apply Latest Content\" %}{{vars.steps.Find_Previous_Result[0].results}}{%endif%}<\/p>\n<p>&nbsp;<\/p>\n<p class=\"mp-tile-description muted-80\"><strong>- Release<\/strong><\/p>\n<p class=\"mp-tile-description muted-80\">{% if vars.steps.Fetch_Release.data | length == 0 %}A new release &nbsp;<a href=\"{{vars.steps.Create_Release.data['html_url']}}\" target=\"_blank\" rel=\"noopener\">{{vars.steps.Create_Release.data.name}}<\/a> is successfully created for the <a href=\"{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}\" target=\"_blank\" rel=\"noopener\">{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}<\/a> Repository.{%else %}<\/p>\n<p class=\"mp-tile-description muted-80\">The release <a href=\"{{vars.steps.Fetch_Release.data['html_url']}}\" target=\"_blank\" rel=\"noopener\">{{vars.steps.Fetch_Release.data.name}}<\/a> already exist for the <a href=\"{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}\" target=\"_blank\" rel=\"noopener\">{{vars.source_control_web_url}}\/{{vars.cicd_config.content.split('\/')[-2]}}\/{{vars.cicd_config.content.split('\/')[-1]}}<\/a> Repository.{%endif%}<\/p>"
                },
                "operation": "Append",
                "collection": "{{vars.input.records[0]['@id']}}",
                "__recommend": [],
                "collectionType": "\/api\/3\/change_management",
                "fieldOperation": [],
                "step_variables": []
            },
            "status": null,
            "top": "1100",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928722",
            "group": null,
            "uuid": "cbb514f9-802a-46e8-9120-40592bab4f24"
        }
    ],
    "routes": [
        {
            "@type": "WorkflowRoute",
            "name": "Add comment for existing release -> Update Record",
            "targetStep": "\/api\/3\/workflow_steps\/cbb514f9-802a-46e8-9120-40592bab4f24",
            "sourceStep": "\/api\/3\/workflow_steps\/87e28c72-85e0-48f8-ae2b-d11d659cf9d6",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "c7c6a38c-0a9c-40d9-9e16-271ace8bfe24"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Add comment for new release -> Update Record",
            "targetStep": "\/api\/3\/workflow_steps\/cbb514f9-802a-46e8-9120-40592bab4f24",
            "sourceStep": "\/api\/3\/workflow_steps\/153d8ce3-45f9-4a9d-9bb1-b7f092551aa4",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "d77b6df5-d704-471f-862f-3c0937ddfd8d"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Configuration -> Find Apply Latest Content Record",
            "targetStep": "\/api\/3\/workflow_steps\/5a8d3a4e-d850-4c2b-bbc8-d11be59b6bc3",
            "sourceStep": "\/api\/3\/workflow_steps\/88629062-0a07-4f0c-8b2e-204b651b6af4",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "1fd8c3dc-d38c-487e-b03c-98da26036937"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Create Release -> Add comment for new release",
            "targetStep": "\/api\/3\/workflow_steps\/153d8ce3-45f9-4a9d-9bb1-b7f092551aa4",
            "sourceStep": "\/api\/3\/workflow_steps\/93e3d5a7-bfbb-4b08-bd2e-4890c7cf1f7b",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "a73a17de-7911-4787-a8b8-4e6d4516b9c8"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Fetch Release -> Is Release Exist",
            "targetStep": "\/api\/3\/workflow_steps\/a30e6ec7-8628-450d-a612-992c6ca026e9",
            "sourceStep": "\/api\/3\/workflow_steps\/294510bd-8ca1-4e25-b857-a164b81d279d",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "994bb96b-bac9-4f34-a513-e78c4e35b41f"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Find Apply Latest Content Record -> Find Previous Result",
            "targetStep": "\/api\/3\/workflow_steps\/9d6e356e-d929-444d-ae85-e6f463f2a18b",
            "sourceStep": "\/api\/3\/workflow_steps\/5a8d3a4e-d850-4c2b-bbc8-d11be59b6bc3",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "f601f2d1-6f2c-4b4c-a568-d28e7c447afc"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Find Previous Result -> Fetch Release",
            "targetStep": "\/api\/3\/workflow_steps\/294510bd-8ca1-4e25-b857-a164b81d279d",
            "sourceStep": "\/api\/3\/workflow_steps\/9d6e356e-d929-444d-ae85-e6f463f2a18b",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "7185f721-6d04-437a-aa18-270e88ab24b0"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Is Release Exist -> Add comment for existing release",
            "targetStep": "\/api\/3\/workflow_steps\/87e28c72-85e0-48f8-ae2b-d11d659cf9d6",
            "sourceStep": "\/api\/3\/workflow_steps\/a30e6ec7-8628-450d-a612-992c6ca026e9",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "69f95bae-1b98-4bec-a1f0-0812001a6afe"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Is Release Exist -> Create Release",
            "targetStep": "\/api\/3\/workflow_steps\/93e3d5a7-bfbb-4b08-bd2e-4890c7cf1f7b",
            "sourceStep": "\/api\/3\/workflow_steps\/a30e6ec7-8628-450d-a612-992c6ca026e9",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "d4c57e07-5f09-4074-92b1-ef9a143b5764"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Start -> Configuration",
            "targetStep": "\/api\/3\/workflow_steps\/88629062-0a07-4f0c-8b2e-204b651b6af4",
            "sourceStep": "\/api\/3\/workflow_steps\/48c3020d-e1a4-4960-91ae-1a0591836ead",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "24d3ba3f-a24e-4f9f-a420-95f26340ac5c"
        }
    ],
    "groups": [],
    "priority": "\/api\/3\/picklists\/2b563c61-ae2c-41c0-a85a-c9709585e3f2",
    "uuid": "1e454724-0c76-4a30-b811-a7e8bec6a087",
    "owners": [],
    "isPrivate": false,
    "deletedAt": null,
    "recordTags": [
        "CICD",
        "Subroutine"
    ]
}